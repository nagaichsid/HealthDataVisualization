{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/ycx/Documents/5500/cs5500/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/ycx/Documents/5500/cs5500/src/MyComponent.js\";\nimport React from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.webpack.css'; // Re-uses images from ~leaflet package\n\nimport 'leaflet-defaulticon-compatibility';\nimport ajax from \"./ajax\";\nimport { Grid, Form, FormGroup, FormControl, ControlLabel, Button, ButtonToolbar } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar MyComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(MyComponent, _React$Component);\n\n  var _super = _createSuper(MyComponent);\n\n  function MyComponent(props) {\n    var _this;\n\n    _classCallCheck(this, MyComponent);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      activities: [],\n      date: \"20130209\"\n    };\n    return _this;\n  }\n\n  _createClass(MyComponent, [{\n    key: \"componentDidUpdate\",\n    value: function () {\n      var _componentDidUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_, prevState) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(prevState.date !== this.state.date)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return MyComponent.fetchData(this.state.date);\n\n              case 3:\n                data = _context.sent;\n                this.setState({\n                  activities: data\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidUpdate(_x, _x2) {\n        return _componentDidUpdate.apply(this, arguments);\n      }\n\n      return componentDidUpdate;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return MyComponent.fetchData(this.state.date);\n\n              case 2:\n                data = _context2.sent;\n                this.setState({\n                  activities: data\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var form = document.forms.date;\n      e.preventDefault();\n      this.setState({\n        date: form.date.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var center = [47, -122];\n\n      if (this.state.activities.length) {\n        var _this$state$activitie = this.state.activities[0].placeLog,\n            longitude = _this$state$activitie.longitude,\n            latitude = _this$state$activitie.latitude;\n        center = [latitude, longitude];\n      }\n\n      var popUps = this.state.activities.map(function (activity) {\n        var id = activity.id,\n            placeLog = activity.placeLog,\n            walkingActivity = activity.walkingActivity;\n        var longitude = placeLog.longitude,\n            latitude = placeLog.latitude,\n            placeName = placeLog.placeName,\n            timeSpent = placeLog.timeSpent;\n        var distance = walkingActivity.distance,\n            calorie = walkingActivity.calorie,\n            step = walkingActivity.step;\n        var position = [latitude, longitude];\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: position,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: \"Place Name: \".concat(placeName, \", Distance: \").concat(distance, \", Calorie: \").concat(calorie, \", Step: \").concat(step, \", Time Spent: \").concat(timeSpent, \" mins\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, _this2)\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, _this2);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          children: [/*#__PURE__*/_jsxDEV(Form, {\n            name: \"date\",\n            children: /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n                children: \"Please enter the date of activites: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                name: \"date\",\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(ButtonToolbar, {\n            style: {\n              marginTop: \"10px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              bsStyle: \"primary\",\n              onClick: function onClick(e) {\n                _this2.handleSubmit(e);\n              },\n              children: \"Query!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map__container\",\n          style: {\n            marginTop: \"10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(MapContainer, {\n            center: center,\n            zoom: 9,\n            style: {\n              height: '100vh',\n              width: '100wh'\n            },\n            children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n              attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n              url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this), popUps]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this);\n    }\n  }], [{\n    key: \"fetchData\",\n    value: function () {\n      var _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(date) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return ajax(\"/activities/\".concat(date));\n\n              case 2:\n                data = _context3.sent;\n                return _context3.abrupt(\"return\", data);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function fetchData(_x3) {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }()\n  }]);\n\n  return MyComponent;\n}(React.Component);\n\n;\nexport default MyComponent;","map":{"version":3,"sources":["/Users/ycx/Documents/5500/cs5500/src/MyComponent.js"],"names":["React","MapContainer","TileLayer","Marker","Popup","ajax","Grid","Form","FormGroup","FormControl","ControlLabel","Button","ButtonToolbar","MyComponent","props","state","activities","date","_","prevState","fetchData","data","setState","e","form","document","forms","preventDefault","value","center","length","placeLog","longitude","latitude","popUps","map","activity","id","walkingActivity","placeName","timeSpent","distance","calorie","step","position","marginTop","handleSubmit","height","width","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.webpack.css'; // Re-uses images from ~leaflet package\nimport 'leaflet-defaulticon-compatibility';\nimport ajax from \"./ajax\";\nimport { Grid, Form, FormGroup, FormControl, ControlLabel, Button, ButtonToolbar } from 'react-bootstrap';\n\nclass MyComponent extends React.Component {\n\n    static async fetchData(date) {\n        const data = await ajax(`/activities/${date}`);\n        return data;\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            activities: [],\n            date: \"20130209\"\n        }\n    }\n    \n    async componentDidUpdate(_, prevState) {\n        if(prevState.date !== this.state.date){\n            const data = await MyComponent.fetchData(this.state.date);\n            this.setState({activities: data});\n        }\n    }\n\n    async componentDidMount() {\n        const data = await MyComponent.fetchData(this.state.date);\n        this.setState({activities: data});\n    }\n\n    handleSubmit(e) {\n        const form = document.forms.date;\n        e.preventDefault();\n        this.setState({date: form.date.value});\n    }\n\n    render(){\n        let center = [47, -122];\n        if(this.state.activities.length) {\n            const {longitude, latitude} = this.state.activities[0].placeLog;\n            center = [latitude, longitude];\n        }\n        const popUps = this.state.activities.map(activity => { \n            const {id, placeLog, walkingActivity} = activity;\n            const {longitude, latitude, placeName, timeSpent} = placeLog;\n            const {distance, calorie, step} = walkingActivity;\n            const position = [latitude, longitude];\n            return (<Marker key={id} position={position}>\n                <Popup>\n                    {`Place Name: ${placeName}, Distance: ${distance}, Calorie: ${calorie}, Step: ${step}, Time Spent: ${timeSpent} mins`}\n                </Popup>\n            </Marker>);\n        });\n        return (\n            <div>\n                <Grid>\n                    <Form name=\"date\">\n                        <FormGroup>\n                            <ControlLabel>Please enter the date of activites: </ControlLabel>\n                            <FormControl name=\"date\" autoFocus />\n                        </FormGroup>\n                    </Form>\n                    <ButtonToolbar style={{marginTop: \"10px\"}}>\n                        <Button type=\"button\" bsStyle=\"primary\" onClick={(e)=>{this.handleSubmit(e)}}>Query!</Button>\n                    </ButtonToolbar>\n                </Grid>\n\n                \n                <div className=\"map__container\" style={{marginTop: \"10px\"}}>\n                    <MapContainer\n                        center={center}\n                        zoom={9}\n                        style={{ height: '100vh', width: '100wh' }}\n                    >\n                        <TileLayer\n                            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        />\n                        {popUps}\n                    </MapContainer>\n                </div>\n            </div>\n\n        );\n    }\n};\n\nexport default MyComponent;\n\n"]},"metadata":{},"sourceType":"module"}